(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=110)})({110:function(){'use strict';window.OMAPI_Editor=window.OMAPI_Editor||{},function(a,b,c,d){function e(){var a=d.getActiveEditor();a.$('a').each(function(b,c){var d=a.$(c);'_om_link_placeholder'===d.attr('href')?a.dom.remove(c,!0):d.attr('data-omlink-edit')&&d.attr('data-omlink-edit',null)})}function f(){var a=d.getActiveEditor();if(!a)return null;var b,c,e=a.selection.getStart(),f=a.dom.getParent(e,'a[href]');return f||(c=a.selection.getContent({format:'raw'}),c&&-1!==c.indexOf('</a>')&&(b=c.match(/href="([^">]+)"/),b&&b[1]&&(f=a.$('a[href="'+b[1]+'"]',e)[0]),f&&a.selection.select(f))),f}var g=function(a){return d.monsterlink+a+'/'};d.getActiveEditorId=function(){var b=a.wpActiveEditor,c=a.tinymce;return wp.media.editor.activeEditor&&(b=wp.media.editor.activeEditor),!b&&c&&c.activeEditor&&(b=c.activeEditor.id),b},d.getActiveEditor=function(){var b=d.getActiveEditorId();return b&&a.tinymce?a.tinymce.get(b):null},d.openLinkModal=function(){var a=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0],b=d.getActiveEditor();d.linkNode=f(),console.warn('app.linkNode',d.linkNode),d.linkNode||(e(),b.execCommand('mceInsertLink',!1,{href:'_om_link_placeholder'}),d.linkNode=b.$('a[href="_om_link_placeholder"]')[0],b.nodeChanged()),b.dom.setAttribs(d.linkNode,{"data-omlink-edit":!0}),d.modalOpen(!1)},d.linkText=function(){var a=d.$select.val();a&&(console.warn('app.linkNode',d.linkNode),d.getActiveEditor().execCommand('mceInsertLink',!1,{href:g(a),target:'_blank',rel:'noopener noreferrer'}))},d.modalOpen=function(){var a=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0];d.$toToggle[a?'removeClass':'addClass']('optin-monster-modal-monsterlink'),d.$toToggle[a?'addClass':'removeClass']('optin-monster-modal-inline'),d.$toToggle.show(),d.$body.addClass('modal-open'),d.updateSelectOptions()},d.modalClose=function(){d.$selectInline.length&&(d.$selectInline.get(0).selectedIndex=0),d.$toToggle.hide(),d.$body.removeClass('modal-open')},d.insertShortcode=function(){var a=d.$selectInline.val();a&&wp.media.editor.insert('[optin-monster id="'+a+'"]')},d.updateSelectOptions=function(){var a=d.getActiveEditorId();if(a){var e=b.getElementById(a).value;d.$selectInline.find('option').each(function(){var a=c(this),b=0<=e.indexOf('optin-monster id="'+a.val()+'"');a.attr('disabled',b)})}},d.init=function(){d.$body=c(b.body),d.$toToggle=c('#optin-monster-modal-backdrop, #optin-monster-modal-wrap'),d.$select=c('#optin-monster-modal-select-campaign'),d.$selectInline=c('#optin-monster-modal-select-inline-campaign'),c(b).on('click','.optin-monster-insert-campaign-button',function(a){a.preventDefault(),d.modalOpen()}).on('click','.optin-monster-insert-monsterlink',function(a){a.preventDefault(),d.openLinkModal()}).on('click','#optin-monster-modal-backdrop, #optin-monster-modal-close, #optin-monster-modal-cancel a',function(a){a.preventDefault(),d.modalClose()}).on('click','#optin-monster-modal-submit-inline',function(a){a.preventDefault(),d.insertShortcode(),d.modalClose()}).on('click','#optin-monster-modal-submit',function(a){a.preventDefault(),d.linkText(),d.modalClose()}).on('change','#om-link-campaign',function(){var a=c('#om-link-campaign').val();a&&(c('#wp-link-url').val(g(a)),c('#wp-link-target').prop('checked',!0))}).on('wplink-open',function(){}),d.setupEditor=function(){var b=d.getActiveEditor();if(!b)return void(d.setupEditor.timeout=setTimeout(function(){return d.setupEditor()},100));d.setupEditor.timeout&&clearTimeout(d.setupEditor.timeout),b.on('init',function(){b.on('ExecCommand',function(a){if('WP_Link'===a.command)if(!d.$button){var b=c('.wp-link-input').parent();b.find('.mce-last').removeClass('mce-last');var e=c('\n\t\t\t\t\t\t\t\t<div class="mce-widget mce-btn mce-last" tabindex="-1" role="button" aria-label="OptinMonster" style="margin-left:-3px;">\n\t\t\t\t\t\t\t\t\t<button role="presentation" type="button" tabindex="-1" class="optin-monster-insert-monsterlink"></button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t');d.$button=e.find('button'),d.$button.append(c('.wp-media-buttons-icon.optin-monster-menu-icon').clone()),b.append(e)}else c('#om-link-campaign').val('')})});var e=c('\n\t\t\t\t\t<p class="howto" id="om-link-campaign-label">Or link to a popup campaign</p>\n\t\t\t\t\t<div style="margin-bottom: -8px;">\n\t\t\t\t\t\t<label><span>Select</span>\n\t\t\t\t\t\t\t<select name="om-link-class" id="om-link-campaign" aria-describedby="om-link-campaign-label">\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t');if(e.find('select').html(d.$select.find('option').clone()),c('#link-options').append(e),'undefined'!=typeof a.wpLink){var f=wpLink.getAttrs;wpLink.getAttrs=function(){var a=f(),b=g(c('#om-link-campaign').val());return a.href===b&&(a.target='_blank',a.rel='noopener noreferrer'),a}}},d.setupEditor()},c(d.init)}(window,document,jQuery,window.OMAPI_Editor)}});